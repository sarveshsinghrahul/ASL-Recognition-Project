## üìò camera_wsl_setup.txt
**Setup guide: Use Windows webcam inside WSL via USB/IP passthrough**

---

### ‚öôÔ∏è Prerequisites
1. **Windows 11** (Build ‚â• 22621)
2. **WSL2** installed (Ubuntu or similar)
3. **Administrator rights** on Windows
4. **NVIDIA driver** (optional if you‚Äôre using GPU)

---

### üß© Step 1 ‚Äì Update WSL & Kernel
Open **PowerShell as Administrator** and run:

```powershell
# Update WSL & kernel
wsl --update
wsl --shutdown
```

Then reopen your WSL terminal once updates finish.

---

### üß± Step 2 ‚Äì Install USB/IP tools on Windows
In **PowerShell (Admin)**:

```powershell
# Install USB/IP service (only once)
winget install usbipd-win

# Verify installation
usbipd list
```

You should see a table like:
```
BUSID  VID:PID  DEVICE
1-5    0C45:6A00  Integrated_Webcam_HD
```

Take note of the **BUSID** of your webcam (e.g. `1-5`).

---

### üß∞ Step 3 ‚Äì Attach webcam to WSL
Still in **PowerShell (Admin)**:

```powershell
usbipd attach --wsl --busid <BUSID>
```
> Replace `<BUSID>` with your actual number (e.g. `1-5`).

If it succeeds, you‚Äôll see something like:
```
Attached to Ubuntu
```

---

### üß† Step 4 ‚Äì Verify camera inside WSL
Open your **WSL (Ubuntu)** terminal and run:

```bash
ls /dev/video*
```

‚úÖ You should now see:
```
/dev/video0
```

If you see that ‚Äî your Linux system can now access the camera!

---

### üé• Step 5 ‚Äì Test with OpenCV
Inside WSL, install required packages:

```bash
sudo apt update
sudo apt install -y ffmpeg libsm6 libxext6
pip install opencv-python
```

Then test:
```python
import cv2

cap = cv2.VideoCapture('/dev/video0')
while True:
    ret, frame = cap.read()
    if not ret:
        break
    cv2.imshow("WSL Camera", frame)
    if cv2.waitKey(1) & 0xFF == 27:  # ESC to exit
        break
cap.release()
cv2.destroyAllWindows()
```

If you‚Äôre on Windows 11 + WSLg, the video window should appear normally.

---

### ‚ö†Ô∏è Notes / Troubleshooting
- Only **one system** (Windows *or* WSL) can use the camera at a time.
  If Windows apps (Camera, Zoom, etc.) are open, WSL can‚Äôt access it.
- If `/dev/video0` disappears after a reboot, re-attach the device:
  ```powershell
  usbipd list
  usbipd attach --wsl --busid <BUSID>
  ```
- To **detach** the camera from WSL:
  ```powershell
  usbipd detach --busid <BUSID>
  ```
- If you change distros, re-attach to the correct one (`--distribution <name>`).

---

### üßπ Step 6 ‚Äì Automate (optional)
You can make a small PowerShell script `attach_cam.ps1`:
```powershell
usbipd list
usbipd attach --wsl --busid 1-5
```
Then run it each time you need the camera.

---

### ‚úÖ Verification
Run:
```bash
v4l2-ctl --list-devices
```
If it lists your webcam, WSL access is working.

---

### üöÄ Done!
You can now use `/dev/video0` inside WSL for:
- **OpenCV**
- **MediaPipe (Hands, Pose, Face, etc.)**
- **TensorFlow / PyTorch models**
- **ROS / GStreamer pipelines**
